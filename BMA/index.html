<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>壯熊手臂增肌訓練計畫 - E-ink 版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 針對電子墨水屏優化的樣式 */
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background-color: #ffffff;
            color: #000000;
            line-height: 1.4;
        }

        /* 移除所有漸層、模糊與陰影 */
        .card {
            background: #ffffff;
            border: 3px solid #000000;
            margin-bottom: 1.5rem;
        }

        /* 勾選後的狀態：純黑背景反白字 */
        .set-checkbox:checked + label {
            background-color: #000000 !important;
            color: #ffffff !important;
            border-color: #000000 !important;
        }

        /* 進度條改為純黑實色 */
        .progress-bar {
            background-color: #000000;
        }

        /* 針對 E-ink 停用所有動畫 */
        * {
            transition: none !important;
            animation: none !important;
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body class="pb-40">

    <!-- Header Section -->
    <div class="sticky top-0 z-40 bg-white border-b-4 border-black p-6">
        <div class="flex justify-between items-center mb-4">
            <div>
                <h1 class="text-4xl font-black">壯熊手臂計畫</h1>
                <p class="text-lg font-bold tracking-widest">BEAR MODE ARMS</p>
            </div>
            <button onclick="toggleRules()" class="p-4 border-4 border-black font-black text-2xl">
                法則
            </button>
        </div>

        <!-- Progress Bar -->
        <div class="mt-4">
            <div class="flex justify-between items-end mb-2">
                <span class="text-xl font-bold">目前進度</span>
                <span id="progress-text" class="text-3xl font-black">0%</span>
            </div>
            <div class="w-full border-4 border-black h-8 bg-white overflow-hidden">
                <div id="progress-bar" class="progress-bar h-full w-0"></div>
            </div>
        </div>
    </div>

    <!-- Quick Info -->
    <div class="px-6 mt-8 grid grid-cols-1 gap-4">
        <div class="card p-6 rounded-none">
            <p class="text-lg font-bold border-b-2 border-black mb-2 inline-block">訓練目標</p>
            <p class="text-2xl font-black">正面寬度 & 側面厚度</p>
        </div>
    </div>

    <!-- Workout List -->
    <main id="workout-container" class="px-6 mt-8">
        <!-- JS 動態生成 -->
    </main>

    <!-- Timer Bar -->
    <div id="timer-bar" class="fixed bottom-0 left-0 w-full bg-white border-t-4 border-black p-6 hidden z-50">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-6">
                <div id="timer-display" class="text-6xl font-black">00:00</div>
                <div class="text-xl font-bold">組間休息...</div>
            </div>
            <div class="flex gap-4">
                <button onclick="addTime(15)" class="px-6 py-4 border-4 border-black font-black text-xl">+15s</button>
                <button onclick="resetTimer()" class="px-8 py-4 bg-black text-white font-black text-xl">跳過</button>
            </div>
        </div>
    </div>

    <!-- Rules Modal -->
    <div id="rules-modal" class="fixed inset-0 bg-white z-[100] hidden flex-col p-8 overflow-y-auto">
        <div class="flex justify-between items-center mb-8 border-b-4 border-black pb-4">
            <h2 class="text-4xl font-black">訓練黃金法則</h2>
            <button onclick="toggleRules()" class="p-4 border-4 border-black text-2xl font-black">關閉</button>
        </div>
        <div class="space-y-10">
            <div>
                <h4 class="text-2xl font-black mb-4">01. 節奏控制</h4>
                <p class="text-xl font-bold">慢下快上 (3-0-1-0)：放慢下放速度至 3~4 秒。這比單純加重更能有效刺激肌肉肥大。</p>
            </div>
            <div>
                <h4 class="text-2xl font-black mb-4">02. 支點穩定</h4>
                <p class="text-xl font-bold">鎖定手肘：手肘應為支點固定，不要前後移動來借力。</p>
            </div>
            <div>
                <h4 class="text-2xl font-black mb-4">03. 頂峰收縮</h4>
                <p class="text-xl font-bold">強力擠壓：在動作最頂端停頓 1 秒，感受肌肉最極限的收縮感。</p>
            </div>
        </div>
        <button onclick="toggleRules()" class="w-full mt-12 py-8 bg-black text-white font-black text-3xl">準備開練</button>
    </div>

    <script>
        const workoutData = [
            {
                phase: "Phase 01: 暖身激活",
                rest: 0,
                exercises: [
                    { name: "輕重量彎舉", weight: "約 5kg", sets: 2, reps: "20", angle: "站姿", tip: "讓關節產生滑液，預防受傷" },
                    { name: "輕重量臂屈伸", weight: "約 5kg", sets: 2, reps: "20", angle: "站姿", tip: "肌肉充血，預熱三頭肌" }
                ]
            },
            {
                phase: "Phase 02: 厚度與寬度堆疊",
                rest: 90,
                exercises: [
                    { name: "坐姿過頭臂屈伸", weight: "22.5kg", sets: 4, reps: "8-10", angle: "90° (坐姿)", tip: "手肘內收，拉開三頭肌長頭" },
                    { name: "坐姿啞鈴錘式彎舉", weight: "22.5kg", sets: 4, reps: "8-10", angle: "90° (坐姿)", tip: "專攻「肱肌」，手臂正面寬度關鍵" }
                ]
            },
            {
                phase: "Phase 03: 線條與飽滿度雕塑",
                rest: 60,
                exercises: [
                    { name: "仰臥啞鈴臂屈伸", weight: "10-15kg", sets: 3, reps: "10-12", angle: "0° (平躺)", tip: "離心慢下 3 秒，感受三頭肌撕裂感" },
                    { name: "上斜啞鈴彎舉", weight: "10-15kg", sets: 3, reps: "12-15", angle: "45°-60°", tip: "手臂下垂身後，打造外側弧度" }
                ]
            },
            {
                phase: "Phase 04: 充血收尾",
                rest: 45,
                exercises: [
                    { name: "啞鈴窄距臥推", weight: "組合重量", sets: 3, reps: "力竭", angle: "0° (平躺)", tip: "兩顆啞鈴緊貼，衝擊整體圍度" }
                ]
            }
        ];

        let totalSets = 0;
        let completedSets = 0;
        let timerInterval = null;
        let timeLeft = 0;

        function init() {
            const container = document.getElementById('workout-container');
            workoutData.forEach((phase, phaseIdx) => {
                const phaseEl = document.createElement('section');
                phaseEl.className = "mb-12";
                
                let exercisesHtml = '';
                phase.exercises.forEach((ex, exIdx) => {
                    const exerciseId = `ex-${phaseIdx}-${exIdx}`;
                    let setsHtml = '';
                    for(let i=1; i<=ex.sets; i++) {
                        totalSets++;
                        const setId = `${exerciseId}-s${i}`;
                        setsHtml += `
                            <div class="flex-shrink-0">
                                <input type="checkbox" id="${setId}" class="hidden set-checkbox" onchange="toggleSet('${setId}', ${phase.rest})">
                                <label for="${setId}" class="w-20 h-20 border-4 border-black flex items-center justify-center text-xl font-black cursor-pointer">
                                    ${i}
                                </label>
                            </div>
                        `;
                    }

                    exercisesHtml += `
                        <div class="card p-6">
                            <div class="flex justify-between items-start mb-4">
                                <h3 class="font-black text-3xl">${ex.name}</h3>
                                <span class="border-2 border-black px-3 py-1 text-lg font-bold uppercase">${ex.angle}</span>
                            </div>
                            <div class="flex flex-wrap gap-4 mb-4">
                                <span class="text-2xl font-black bg-black text-white px-4 py-2">${ex.weight}</span>
                                <span class="text-2xl font-black border-4 border-black px-4 py-2">${ex.reps} REPS</span>
                            </div>
                            <div class="bg-gray-100 p-4 mb-6 border-l-8 border-black">
                                <p class="text-xl font-bold">${ex.tip}</p>
                            </div>
                            <div class="flex gap-4 overflow-x-auto no-scrollbar pb-2">
                                ${setsHtml}
                            </div>
                        </div>
                    `;
                });

                phaseEl.innerHTML = `
                    <h2 class="text-2xl font-black bg-black text-white inline-block px-4 py-1 mb-4">${phase.phase}</h2>
                    ${exercisesHtml}
                `;
                container.appendChild(phaseEl);
            });
        }

        function toggleSet(id, restTime) {
            const cb = document.getElementById(id);
            if (cb.checked) {
                completedSets++;
                if (restTime > 0) startTimer(restTime);
            } else {
                completedSets--;
            }
            updateProgress();
        }

        function updateProgress() {
            const percent = Math.round((completedSets / totalSets) * 100);
            document.getElementById('progress-bar').style.width = `${percent}%`;
            document.getElementById('progress-text').innerText = `${percent}%`;
        }

        function startTimer(seconds) {
            clearInterval(timerInterval);
            timeLeft = seconds;
            document.getElementById('timer-bar').classList.remove('hidden');
            
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    resetTimer();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
            const s = (timeLeft % 60).toString().padStart(2, '0');
            document.getElementById('timer-display').innerText = `${m}:${s}`;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            document.getElementById('timer-bar').classList.add('hidden');
        }

        function addTime(s) {
            timeLeft += s;
            updateTimerDisplay();
        }

        function toggleRules() {
            const modal = document.getElementById('rules-modal');
            modal.classList.toggle('hidden');
            modal.classList.toggle('flex');
        }

        window.onload = init;
    </script>
</body>
</html>
