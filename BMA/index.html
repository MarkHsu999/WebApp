<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å£¯ç†Šæ‰‹è‡‚å¢è‚Œè¨ˆç•« - å¤§å­—é«”ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        
        :root {
            --bg-color: #0f172a;
            --text-color: #f1f5f9;
            --accent-color: #fb923c;
            --card-bg: rgba(30, 41, 59, 0.7);
            --border-style: 1px solid rgba(255, 255, 255, 0.1);
            --radius: 1.5rem;
        }

        /* --- åŸºç¤æ¨£å¼ (å¤§å­—é«”) --- */
        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            -webkit-tap-highlight-color: transparent;
        }

        /* æ¨™é¡Œèˆ‡æ–‡å­—çµ±ä¸€æ”¾å¤§ */
        h1 { font-size: 3.5rem !important; line-height: 1 !important; } /* å·¨å¤§æ¨™é¡Œ */
        h2 { font-size: 2rem !important; } /* Phase æ¨™é¡Œ */
        h3 { font-size: 2.75rem !important; line-height: 1.1 !important; } /* å‹•ä½œåç¨± */
        
        .stat-badge { font-size: 1.5rem !important; padding: 0.5rem 1rem !important; }
        .exercise-tip { font-size: 1.25rem !important; line-height: 1.6 !important; }
        
        /* çµ„æ•¸æŒ‰éˆ•æ”¾å¤§ */
        .set-label {
            width: 5.5rem !important;
            height: 5.5rem !important;
            font-size: 1.75rem !important;
            font-weight: 900 !important;
        }

        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: var(--border-style);
            border-radius: var(--radius);
        }

        .set-checkbox:checked + label {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            color: #0f172a;
            transform: scale(1.05);
        }

        .progress-fill {
            background-color: var(--accent-color);
            box-shadow: 0 0 15px rgba(251, 146, 60, 0.6);
            transition: width 0.3s ease;
        }

        /* --- E-ink æ¨¡å¼ç‰¹å®šè¦†è“‹ --- */
        body.e-ink-mode {
            background-color: #ffffff !important;
            color: #000000 !important;
        }

        body.e-ink-mode * {
            transition: none !important;
            animation: none !important;
            box-shadow: none !important;
            backdrop-filter: none !important;
            text-shadow: none !important;
        }

        body.e-ink-mode .glass-card {
            background: #ffffff !important;
            border: 4px solid #000000 !important;
            border-radius: 0 !important;
            color: #000000 !important;
        }

        body.e-ink-mode .set-checkbox:checked + label {
            background-color: #000000 !important;
            color: #ffffff !important;
            border-color: #000000 !important;
        }

        body.e-ink-mode .set-label {
            border: 4px solid #000000 !important;
            border-radius: 0 !important;
        }

        body.e-ink-mode .progress-fill {
            background-color: #000000 !important;
        }

        body.e-ink-mode .progress-container {
            border: 4px solid #000000 !important;
            background-color: #ffffff !important;
            height: 2.5rem !important;
        }

        body.e-ink-mode .text-slate-400, 
        body.e-ink-mode .text-slate-500 {
            color: #000000 !important;
            opacity: 1;
        }

        body.e-ink-mode .exercise-tip { 
            border-left: 10px solid #000 !important; 
            background: #f0f0f0 !important; 
            border-radius: 0 !important;
        }

        body.e-ink-mode .stat-badge { 
            border: 3px solid #000 !important; 
            background: #fff !important; 
            color: #000 !important;
            border-radius: 0 !important;
        }

        /* Utilities */
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="pb-32">

    <!-- Fixed Header -->
    <div id="sticky-header" class="sticky top-0 z-40 bg-[#0f172a]/95 backdrop-blur-xl border-b border-white/10 p-6">
        <div class="flex justify-between items-start mb-6">
            <div>
                <h1 class="font-black tracking-tighter">å£¯ç†Šæ‰‹è‡‚è¨ˆç•«</h1>
                <p class="text-slate-400 text-lg uppercase tracking-[0.2em] font-bold">Bear Mode Arms</p>
            </div>
            <div class="flex gap-3">
                <button onclick="toggleDisplayMode()" class="p-4 glass-card flex flex-col items-center justify-center min-w-[80px]">
                    <span id="mode-icon" class="text-3xl">ğŸ•¶ï¸</span>
                    <span id="mode-text" class="text-xs font-bold mt-2 uppercase">Fancy</span>
                </button>
                <button onclick="toggleRules()" class="p-4 glass-card">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Progress Section -->
        <div>
            <div class="flex justify-between items-end mb-3">
                <span class="text-xl font-black text-slate-500 uppercase tracking-widest">Progress</span>
                <span id="progress-text" class="text-4xl font-mono font-black">0%</span>
            </div>
            <div class="progress-container w-full bg-slate-800/80 h-4 rounded-full overflow-hidden border border-white/5">
                <div id="progress-bar" class="progress-fill h-full w-0"></div>
            </div>
        </div>
    </div>

    <!-- Workout List -->
    <main id="workout-container" class="px-6 mt-10 space-y-12">
        <!-- JS å‹•æ…‹ç”Ÿæˆ -->
    </main>

    <!-- Timer Bar -->
    <div id="timer-bar" class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[94%] max-w-xl glass-card p-6 shadow-2xl hidden z-50 border-2 border-orange-500/30">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-6">
                <div id="timer-display" class="text-6xl font-mono font-black text-orange-400">00:00</div>
                <div class="flex flex-col">
                    <span class="text-lg font-black uppercase text-slate-500">Resting</span>
                    <span class="text-sm font-bold opacity-80">çµ„é–“ä¼‘æ¯...</span>
                </div>
            </div>
            <div class="flex gap-3">
                <button onclick="addTime(15)" class="px-6 py-4 bg-slate-700/60 rounded-xl text-xl font-black">+15s</button>
                <button onclick="resetTimer()" class="px-8 py-4 bg-orange-500 text-slate-900 rounded-xl text-xl font-black uppercase">Skip</button>
            </div>
        </div>
    </div>

    <!-- Rules Modal -->
    <div id="rules-modal" class="fixed inset-0 bg-black/95 backdrop-blur-xl z-[100] hidden flex-col p-10 overflow-y-auto">
        <div class="flex justify-between items-center mb-10 border-b border-white/10 pb-6">
            <h2 class="text-5xl font-black text-white">è¨“ç·´é»ƒé‡‘æ³•å‰‡</h2>
            <button onclick="toggleRules()" class="p-4 text-slate-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div class="space-y-12">
            <div>
                <h4 class="text-orange-400 text-2xl font-black uppercase mb-3">01. ç¯€å¥æ§åˆ¶</h4>
                <p class="text-slate-200 text-2xl leading-relaxed"><strong>3-0-1-0ï¼š</strong> æ”¾æ…¢ä¸‹æ”¾é€Ÿåº¦è‡³ 3~4 ç§’ã€‚é›¢å¿ƒæ”¶ç¸®æ˜¯è‚Œè‚‰è‚¥å¤§æœ€é—œéµçš„åˆºæ¿€ã€‚</p>
            </div>
            <div>
                <h4 class="text-orange-400 text-2xl font-black uppercase mb-3">02. æ”¯é»ç©©å®š</h4>
                <p class="text-slate-200 text-2xl leading-relaxed"><strong>é–å®šæ‰‹è‚˜ï¼š</strong> æ‰‹è‚˜å¿…é ˆå›ºå®šï¼Œä¸è¦å‰å¾Œæ“ºå‹•è—‰åŠ›ï¼Œå°ˆæ³¨æ–¼ç›®æ¨™è‚Œç¾¤ã€‚</p>
            </div>
            <div>
                <h4 class="text-orange-400 text-2xl font-black uppercase mb-3">03. é ‚å³°æ”¶ç¸®</h4>
                <p class="text-slate-200 text-2xl leading-relaxed"><strong>å¼·åŠ›æ“ å£“ï¼š</strong> åœ¨å‹•ä½œé ‚ç«¯åœé “ 1 ç§’ï¼Œæƒ³åƒè¦æŠŠè‚Œè‚‰çº–ç¶­æ“ çˆ†ã€‚</p>
            </div>
        </div>
        <button onclick="toggleRules()" class="w-full mt-16 py-8 bg-orange-500 text-slate-900 font-black text-3xl rounded-3xl">æº–å‚™é–‹ç·´</button>
    </div>

    <script>
        const workoutData = [
            {
                phase: "Phase 01: æš–èº«æ¿€æ´»",
                rest: 0,
                exercises: [
                    { name: "è¼•é‡é‡å½èˆ‰", weight: "5kg", sets: 2, reps: "20", angle: "ç«™å§¿", tip: "é é˜²å—å‚·ï¼Œè®“é—œç¯€ç”¢ç”Ÿæ»‘æ¶²" },
                    { name: "è¼•é‡é‡è‡‚å±ˆä¼¸", weight: "5kg", sets: 2, reps: "20", angle: "ç«™å§¿", tip: "é ç†±ä¸‰é ­è‚Œï¼Œé–‹å§‹å……è¡€" }
                ]
            },
            {
                phase: "Phase 02: åšåº¦èˆ‡å¯¬åº¦å †ç–Š",
                rest: 90,
                exercises: [
                    { name: "åå§¿éé ­è‡‚å±ˆä¼¸", weight: "22.5kg", sets: 4, reps: "8-10", angle: "90Â° (åå§¿)", tip: "æ‹‰é–‹ä¸‰é ­è‚Œé•·é ­ï¼Œå¢åŠ åšåº¦" },
                    { name: "åå§¿å•éˆ´éŒ˜å¼å½èˆ‰", weight: "22.5kg", sets: 4, reps: "8-10", angle: "90Â° (åå§¿)", tip: "å°ˆæ”»è‚±è‚Œï¼Œæ‰‹è‡‚æ­£é¢å¯¬åº¦é—œéµ" }
                ]
            },
            {
                phase: "Phase 03: ç·šæ¢èˆ‡é£½æ»¿åº¦é›•å¡‘",
                rest: 60,
                exercises: [
                    { name: "ä»°è‡¥å•éˆ´è‡‚å±ˆä¼¸", weight: "10-15kg", sets: 3, reps: "10-12", angle: "0Â° (å¹³èºº)", tip: "æ…¢ä¸‹ 3 ç§’ï¼Œæ„Ÿå—è‚Œè‚‰æ’•è£‚" },
                    { name: "ä¸Šæ–œå•éˆ´å½èˆ‰", weight: "10-15kg", sets: 3, reps: "12-15", angle: "45Â°-60Â°", tip: "æ‰“é€ äºŒé ­è‚Œå¤–å´å¼§åº¦" }
                ]
            },
            {
                phase: "Phase 04: å……è¡€æ”¶å°¾",
                rest: 45,
                exercises: [
                    { name: "å•éˆ´çª„è·è‡¥æ¨", weight: "çµ„åˆé‡é‡", sets: 3, reps: "åŠ›ç«­", angle: "0Â° (å¹³èºº)", tip: "å•éˆ´ç·Šè²¼ï¼Œè¡æ“Šæ•´é«”ä¸‰é ­åœåº¦" }
                ]
            }
        ];

        let totalSets = 0;
        let completedSets = 0;
        let timerInterval = null;
        let timeLeft = 0;
        let isEink = false;

        function init() {
            const container = document.getElementById('workout-container');
            container.innerHTML = '';
            totalSets = 0;
            workoutData.forEach((phase, phaseIdx) => {
                const phaseEl = document.createElement('section');
                
                let exercisesHtml = '';
                phase.exercises.forEach((ex, exIdx) => {
                    const exerciseId = `ex-${phaseIdx}-${exIdx}`;
                    let setsHtml = '';
                    for(let i=1; i<=ex.sets; i++) {
                        totalSets++;
                        const setId = `${exerciseId}-s${i}`;
                        setsHtml += `
                            <div class="flex-shrink-0">
                                <input type="checkbox" id="${setId}" class="hidden set-checkbox" onchange="toggleSet('${setId}', ${phase.rest})">
                                <label for="${setId}" class="set-label border-4 border-slate-700 rounded-3xl flex items-center justify-center transition-all cursor-pointer hover:border-slate-400">
                                    ${i}
                                </label>
                            </div>
                        `;
                    }

                    exercisesHtml += `
                        <div class="glass-card p-8 mb-8">
                            <div class="flex justify-between items-start mb-6">
                                <h3 class="font-black">${ex.name}</h3>
                                <span class="stat-badge border border-orange-500/20 rounded-xl font-black uppercase text-orange-400 whitespace-nowrap">${ex.angle}</span>
                            </div>
                            <div class="flex flex-wrap gap-4 mb-6">
                                <span class="stat-badge bg-slate-800/60 rounded-2xl font-black text-white">${ex.weight}</span>
                                <span class="stat-badge bg-slate-800/60 rounded-2xl font-black text-white">${ex.reps} REPS</span>
                            </div>
                            <div class="exercise-tip bg-white/5 border-l-4 border-orange-500 p-6 mb-8 rounded-r-2xl">
                                <p class="font-medium italic opacity-90">"${ex.tip}"</p>
                            </div>
                            <div class="flex gap-6 overflow-x-auto no-scrollbar py-2">
                                ${setsHtml}
                            </div>
                        </div>
                    `;
                });

                phaseEl.innerHTML = `
                    <div class="mb-6 flex items-center gap-4">
                        <span class="h-1.5 w-10 bg-orange-500 rounded-full"></span>
                        <h2 class="font-black text-slate-400 uppercase tracking-widest">${phase.phase}</h2>
                    </div>
                    ${exercisesHtml}
                `;
                container.appendChild(phaseEl);
            });
        }

        function toggleDisplayMode() {
            isEink = !isEink;
            const body = document.body;
            const header = document.getElementById('sticky-header');
            const icon = document.getElementById('mode-icon');
            const text = document.getElementById('mode-text');

            if (isEink) {
                body.classList.add('e-ink-mode');
                header.style.backgroundColor = "white";
                icon.innerText = 'ğŸ“„';
                text.innerText = 'E-Ink';
            } else {
                body.classList.remove('e-ink-mode');
                header.style.backgroundColor = ""; // å›å¾© CSS å®šç¾©
                icon.innerText = 'ğŸ•¶ï¸';
                text.innerText = 'Fancy';
            }
        }

        function toggleSet(id, restTime) {
            const cb = document.getElementById(id);
            if (cb.checked) {
                completedSets++;
                if (restTime > 0) startTimer(restTime);
            } else {
                completedSets--;
            }
            updateProgress();
        }

        function updateProgress() {
            const percent = Math.round((completedSets / (totalSets || 1)) * 100);
            document.getElementById('progress-bar').style.width = `${percent}%`;
            document.getElementById('progress-text').innerText = `${percent}%`;
        }

        function startTimer(seconds) {
            clearInterval(timerInterval);
            timeLeft = seconds;
            document.getElementById('timer-bar').classList.remove('hidden');
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    resetTimer();
                    if (navigator.vibrate) navigator.vibrate([300, 100, 300]);
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
            const s = (timeLeft % 60).toString().padStart(2, '0');
            document.getElementById('timer-display').innerText = `${m}:${s}`;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            document.getElementById('timer-bar').classList.add('hidden');
        }

        function addTime(s) {
            timeLeft += s;
            updateTimerDisplay();
        }

        function toggleRules() {
            const modal = document.getElementById('rules-modal');
            if (modal.classList.contains('hidden')) {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                if (isEink) modal.style.backgroundColor = "white";
                else modal.style.backgroundColor = "";
            } else {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
        }

        window.onload = init;
    </script>
</body>
</html>
