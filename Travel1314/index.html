<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 宜蘭出遊行程與分配表</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f3f4f6;
        }
        .card {
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-2px);
        }
        /* Hide scrollbar for cleaner look in specific areas if needed */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header -->
    <header class="bg-teal-600 text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
            <h1 class="text-xl font-bold flex items-center gap-2">
                <i data-lucide="palmtree" class="w-6 h-6"></i>
                <span class="hidden sm:inline">2025 出遊行程資訊 - </span>交換禮物🎁
            </h1>
            <span class="text-sm bg-teal-700 px-3 py-1 rounded-full whitespace-nowrap">12月13-14日</span>
        </div>
    </header>

    <!-- Source Link Banner (新增的原始資料來源) -->
    <div class="bg-amber-100 border-b border-amber-300 py-2">
        <div class="max-w-6xl mx-auto px-4 text-sm text-amber-800 text-center font-medium">
            原始資料來源：
            <a href="https://reurl.cc/LQl8Z4" target="_blank" class="text-amber-700 hover:text-amber-900 underline font-bold transition">
                宜蘭兩天一夜旅遊行程表 (Google Sheets)
            </a>
        </div>
    </div>

    <main class="max-w-6xl mx-auto px-4 py-6">
        
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            
            <!-- Left Column: Main Content -->
            <div class="lg:col-span-3 space-y-8">

                <!-- Notices Section (Priority) -->
                <section>
                    <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <i data-lucide="megaphone" class="text-red-500"></i>
                        重要注意事項
                    </h2>
                    <div class="bg-white rounded-xl shadow-md p-5 border-l-4 border-red-500">
                        <ul class="space-y-3">
                            <li class="flex items-start gap-3">
                                <span class="bg-red-100 text-red-600 font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs">1</span>
                                <p><span class="font-bold text-gray-900">集合地點：</span>台北車站西三門 (承德路上)。</p>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="bg-red-100 text-red-600 font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs">2</span>
                                <p><span class="font-bold text-gray-900">集合時間：</span>12/13(六) 上午 9:30 ~ 9:40，<span class="text-red-600 font-bold">逾時不候</span>，請自行搭火車到礁溪站。</p>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="bg-red-100 text-red-600 font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs">3</span>
                                <p>各車司機與乘客若事先討論好其他集合方式，可不用到北車集合，但<span class="font-bold">司機務必事先告知小鐵</span>。</p>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="bg-red-100 text-red-600 font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs">4</span>
                                <p>未到台北車站集合的人，集合時間請自行另行議定。</p>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="bg-red-100 text-red-600 font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs">5</span>
                                <p>12月14日下午預計行程為礁溪泡湯，可自由參加。</p>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="bg-red-100 text-red-600 font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs">6</span>
                                <p><span class="font-bold text-gray-900">記得帶兩份禮物🎁（天堂👼地獄👿）還有變裝服裝喔。</span></p>
                            </li>
                        </ul>
                    </div>
                </section>

                <!-- Accommodation Section -->
                <section>
                    <div class="flex flex-wrap items-center justify-between mb-4 gap-2">
                        <h2 class="text-xl font-bold text-gray-700 flex items-center gap-2">
                            <i data-lucide="bed-double" class="text-blue-500"></i>
                            房間住宿分配
                        </h2>
                        <a href="https://reurl.cc/gn6VZR" target="_blank" class="text-sm bg-blue-100 text-blue-600 px-3 py-1 rounded-full hover:bg-blue-200 transition flex items-center gap-1">
                            <i data-lucide="map-pin" class="w-3 h-3"></i> 12-3 Villa會館
                        </a>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Room 101 -->
                        <div class="bg-white p-4 rounded-xl shadow-sm card border border-gray-100">
                            <div class="flex justify-between items-center mb-3 border-b pb-2">
                                <span class="font-bold text-lg text-blue-600">101 四人房</span>
                                <i data-lucide="users" class="w-4 h-4 text-gray-400"></i>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">阿龐</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">保羅</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">窩窩</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">鮑鮑</span>
                            </div>
                        </div>

                        <!-- Room 102 -->
                        <div class="bg-white p-4 rounded-xl shadow-sm card border border-gray-100">
                            <div class="flex justify-between items-center mb-3 border-b pb-2">
                                <span class="font-bold text-lg text-blue-600">102 四人房</span>
                                <i data-lucide="users" class="w-4 h-4 text-gray-400"></i>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">寶哥</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">小玄</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">小胖猴</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">汪汪</span>
                            </div>
                        </div>

                        <!-- Room 201 -->
                        <div class="bg-white p-4 rounded-xl shadow-sm card border border-gray-100">
                            <div class="flex justify-between items-center mb-3 border-b pb-2">
                                <span class="font-bold text-lg text-blue-600">201 四人房 +1</span>
                                <i data-lucide="users" class="w-4 h-4 text-gray-400"></i>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">cosby</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">阿光</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">小揚</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">Soy</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">狗狗</span>
                            </div>
                        </div>

                        <!-- Room 202 -->
                        <div class="bg-white p-4 rounded-xl shadow-sm card border border-gray-100">
                            <div class="flex justify-between items-center mb-3 border-b pb-2">
                                <span class="font-bold text-lg text-blue-600">202 四人房 +1</span>
                                <i data-lucide="users" class="w-4 h-4 text-gray-400"></i>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">球球</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">小華</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">企鵝</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">房子</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">馬克</span>
                            </div>
                        </div>

                        <!-- Room 203 -->
                        <div class="bg-white p-4 rounded-xl shadow-sm card border border-gray-100 md:col-span-2">
                            <div class="flex justify-between items-center mb-3 border-b pb-2">
                                <span class="font-bold text-lg text-purple-600">203 雙人房</span>
                                <i data-lucide="users" class="w-4 h-4 text-gray-400"></i>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">小鐵</span>
                                <span class="bg-gray-100 px-3 py-1 rounded-lg text-gray-700">凱翔</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Transport Section -->
                <section>
                    <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <i data-lucide="car-front" class="text-green-600"></i>
                        車輛共乘分配
                    </h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                        
                        <!-- Car 1 -->
                        <div class="bg-white p-4 rounded-xl shadow-sm border-t-4 border-green-500">
                            <div class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i data-lucide="steering-wheel" class="w-4 h-4"></i> 小鐵車
                            </div>
                            <div class="text-sm text-gray-600 space-y-1">
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>小揚</div>
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>保羅</div>
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>SOY</div>
                            </div>
                        </div>

                        <!-- Car 2 -->
                        <div class="bg-white p-4 rounded-xl shadow-sm border-t-4 border-green-500">
                            <div class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i data-lucide="steering-wheel" class="w-4 h-4"></i> 小華車
                            </div>
                            <div class="text-sm text-gray-600 space-y-1">
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>球球</div>
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>企鵝</div>
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>窩窩</div>
                            </div>
                        </div>

                        <!-- Car 3 -->
                        <div class="bg-white p-4 rounded-xl shadow-sm border-t-4 border-green-500">
                            <div class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i data-lucide="steering-wheel" class="w-4 h-4"></i> 阿光車(三重上)
                            </div>
                            <div class="text-sm text-gray-600 space-y-1">
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>cosby</div>
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>阿龐</div>
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>鮑鮑</div>
                            </div>
                        </div>

                        <!-- Car 4 -->
                        <div class="bg-white p-4 rounded-xl shadow-sm border-t-4 border-green-500">
                            <div class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i data-lucide="steering-wheel" class="w-4 h-4"></i> 胖猴車
                            </div>
                            <div class="text-sm text-gray-600 space-y-1">
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>汪汪</div>
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>寶哥</div>
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>玄子</div>
                            </div>
                        </div>

                        <!-- Car 5 -->
                        <div class="bg-white p-4 rounded-xl shadow-sm border-t-4 border-green-500">
                            <div class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i data-lucide="steering-wheel" class="w-4 h-4"></i> 凱翔車(板橋上)
                            </div>
                            <div class="text-sm text-gray-600 space-y-1">
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>房子</div>
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>馬克</div>
                                <div class="flex items-center gap-2"><div class="w-1.5 h-1.5 rounded-full bg-green-400"></div>狗狗</div>
                            </div>
                        </div>

                    </div>
                </section>

                <!-- Dining Section -->
                <section class="pb-8">
                    <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <i data-lucide="utensils" class="text-orange-500"></i>
                        餐飲資訊
                    </h2>
                    <div class="bg-white rounded-xl shadow-sm p-4 flex flex-col md:flex-row md:items-center justify-between gap-4 border-l-4 border-orange-400">
                        <div>
                            <span class="text-xs font-bold text-orange-500 uppercase tracking-wider">12月13日 午餐</span>
                            <h3 class="text-lg font-bold text-gray-800">碗公手作無菜單料理</h3>
                        </div>
                        <a href="https://reurl.cc/qKv7kE" target="_blank" class="bg-orange-100 text-orange-700 px-4 py-2 rounded-lg font-medium hover:bg-orange-200 transition flex items-center justify-center gap-2">
                            <i data-lucide="map-pin" class="w-4 h-4"></i>
                            開啟導航
                        </a>
                    </div>
                </section>
				
				 <!-- Option Section -->
				<section class="pb-8">
                    <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <i data-lucide="bath" class="text-blue-500"></i>
                        泡湯資訊 (選配)
                    </h2>
                    <div class="bg-white rounded-xl shadow-sm p-4 flex flex-col md:flex-row md:items-center justify-between gap-4 border-l-4 border-blue-400">
                        <div>
                            <span class="text-xs font-bold text-blue-500 uppercase tracking-wider">12月14日 傍晚</span>
                            <h3 class="text-lg font-bold text-gray-800">森林風呂</h3>
                        </div>
                        <a href="https://maps.app.goo.gl/G58jfJgeFGi3qrHAA" target="_blank" class="bg-blue-100 text-blue-700 px-4 py-2 rounded-lg font-medium hover:bg-blue-200 transition flex items-center justify-center gap-2">
                            <i data-lucide="map-pin" class="w-4 h-4"></i>
                            開啟導航
                        </a>
                    </div>
                </section>
            </div>

            <!-- Right Column: Sidebar (Weather & Extra Info) -->
            <div class="lg:col-span-1 space-y-6">
                
                <!-- Weather Widget -->
                <div class="bg-white rounded-xl shadow-md p-5 border-t-4 border-sky-400 sticky top-24">
                    <h3 class="text-lg font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <i data-lucide="cloud-sun" class="text-sky-500"></i>
                        當地天氣 (礁溪)
                    </h3>
                    
                    <div id="weather-container" class="space-y-4">
                        <!-- Loading State (Will be replaced by JS) -->
                         <div class="animate-pulse flex items-center justify-between p-2">
                            <div class="space-y-2">
                                <div class="h-4 bg-gray-200 rounded w-20"></div>
                                <div class="h-3 bg-gray-200 rounded w-12"></div>
                            </div>
                            <div class="h-8 w-8 bg-gray-200 rounded-full"></div>
                         </div>
                         <div class="animate-pulse flex items-center justify-between p-2">
                            <div class="space-y-2">
                                <div class="h-4 bg-gray-200 rounded w-20"></div>
                                <div class="h-3 bg-gray-200 rounded w-12"></div>
                            </div>
                            <div class="h-8 w-8 bg-gray-200 rounded-full"></div>
                         </div>
                    </div>

                    <div class="mt-4 pt-4 border-t border-gray-100">
                        <div class="flex gap-2 items-start">
                            <i data-lucide="thermometer-snowflake" class="w-4 h-4 text-blue-500 mt-0.5"></i>
                            <div id="weather-suggestion" class="text-xs text-gray-600">
                                <span class="font-bold text-gray-800">穿搭建議：</span>
                                載入中...
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </main>
    
    <footer class="bg-gray-800 text-gray-400 py-6 text-center text-sm mt-8">
        <p>© 出遊行程小幫手</p>
    </footer>

    <script>
        // Init Icons
        lucide.createIcons();

        // Weather Logic
        document.addEventListener('DOMContentLoaded', async () => {
            const weatherContainer = document.getElementById('weather-container');
            const suggestionContainer = document.getElementById('weather-suggestion');
            
            // Jiaoxi, Yilan Coordinates
            const lat = 24.8278;
            const lon = 121.7727;
            // Trip dates (2025)
            const startDate = '2025-12-13';
            const endDate = '2025-12-14';

            try {
                // Using Open-Meteo API (Free, no key required)
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_probability_max&timezone=Asia%2FTaipei&start_date=${startDate}&end_date=${endDate}`;
                
                const response = await fetch(url);
                if (!response.ok) throw new Error('Weather API failed');
                const data = await response.json();
                
                const daily = data.daily;
                let htmlContent = '';
                let maxRainProb = 0;

                // WMO Weather Code Mapping (Simple version)
                const getWeatherInfo = (code) => {
                    if (code === 0) return { text: '晴朗', icon: 'sun', color: 'text-orange-500' };
                    if (code >= 1 && code <= 3) return { text: '多雲', icon: 'cloud-sun', color: 'text-sky-500' };
                    if (code >= 45 && code <= 48) return { text: '起霧', icon: 'cloud-fog', color: 'text-gray-400' };
                    if (code >= 51 && code <= 67) return { text: '有雨', icon: 'cloud-drizzle', color: 'text-blue-500' };
                    if (code >= 80 && code <= 99) return { text: '陣雨/雷雨', icon: 'cloud-lightning', color: 'text-blue-700' };
                    return { text: '陰天', icon: 'cloud', color: 'text-gray-500' };
                };

                for (let i = 0; i < daily.time.length; i++) {
                    const dateStr = daily.time[i]; // YYYY-MM-DD
                    const dateObj = new Date(dateStr);
                    const formattedDate = `${dateObj.getMonth() + 1}/${dateObj.getDate()} (${['日', '一', '二', '三', '四', '五', '六'][dateObj.getDay()]})`;
                    
                    const minTemp = Math.round(daily.temperature_2m_min[i]);
                    const maxTemp = Math.round(daily.temperature_2m_max[i]);
                    const rainProb = daily.precipitation_probability_max[i];
                    if (rainProb > maxRainProb) maxRainProb = rainProb;

                    const weatherInfo = getWeatherInfo(daily.weather_code[i]);
                    
                    // Specific logic: if rain prob is high but code says cloudy, override to rain icon
                    let displayIcon = weatherInfo.icon;
                    let displayColor = weatherInfo.color;
                    let displayText = weatherInfo.text;
                    
                    if (rainProb > 40 && displayText === '多雲') {
                        displayText = '短暫雨';
                        displayIcon = 'cloud-drizzle';
                        displayColor = 'text-blue-400';
                    }

                    htmlContent += `
                        <div class="flex items-center justify-between p-2 hover:bg-sky-50 rounded-lg transition border-b border-gray-50 last:border-0">
                            <div>
                                <p class="text-sm font-bold text-gray-500">${formattedDate}</p>
                                <p class="text-xs text-gray-400">${displayText} (降雨機率 ${rainProb}%)</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <i data-lucide="${displayIcon}" class="${displayColor} w-8 h-8"></i>
                                <span class="text-lg font-bold text-gray-700">${minTemp}-${maxTemp}°C</span>
                            </div>
                        </div>
                    `;
                }

                weatherContainer.innerHTML = htmlContent;
                lucide.createIcons(); // Re-init icons for new content

                // Dynamic Suggestion
                let suggestion = '';
                if (maxRainProb > 60) {
                    suggestion = `預報顯示<span class="text-blue-600 font-bold">降雨機率高</span>，請務必攜帶雨具，並穿著防水鞋為佳。`;
                } else if (maxRainProb > 30) {
                    suggestion = `可能有<span class="text-sky-600 font-bold">短暫陣雨</span>，建議攜帶折傘以備不時之需。`;
                } else {
                    suggestion = `天氣不錯！但宜蘭冬季氣溫較低，早晚溫差大，建議採<span class="text-orange-600 font-bold">洋蔥式穿搭</span>。`;
                }
                
                suggestionContainer.innerHTML = `<span class="font-bold text-gray-800">穿搭建議：</span>${suggestion}`;

            } catch (error) {
                console.error('Weather Fetch Error:', error);
                weatherContainer.innerHTML = `
                    <div class="text-center py-4 text-gray-400 text-sm">
                        <p>暫時無法取得即時天氣</p>
                        <p class="text-xs mt-1">請稍後再試</p>
                    </div>
                `;
                suggestionContainer.textContent = "無法取得天氣建議，請自行查詢中央氣象署。";
            }
        });
    </script>
</body>
</html>